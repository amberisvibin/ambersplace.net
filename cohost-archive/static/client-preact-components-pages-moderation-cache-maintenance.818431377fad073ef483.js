"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9630],{2735:function(e,t,r){r.d(t,{Qj:function(){return k},zx:function(){return j}});var l=r(65443),a=r.n(l),n=r(94159),o=r(6285);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},s.apply(this,arguments)}const c=o.z.enum(["pill","roundrect","authn"]),i=o.z.enum(["cherry","strawberry","mango","not-black","red","green","accent","secondary","authn-primary","authn-other"]),u=(o.z.object({buttonStyle:c,color:i,className:o.z.string().optional()}),a()("bg-notWhite","hover:text-notWhite")),d=a()("font-atkinson","font-bold","rounded-full","border-2"),m=a()("body-2","rounded-lg"),b=a()("flex","h-12","items-center","justify-center","rounded-lg","px-6","text-lg"),f=a()("border-cherry","hover:bg-cherry","text-cherry","active:bg-cherry-600","active:border-cherry-600","disabled:text-cherry-300","disabled:border-cherry-300","focus:outline-cherry","focus:ring-cherry",u),g=a()("border-strawberry","hover:bg-strawberry","text-strawberry","active:bg-strawberry-600","active:border-strawberry-600","disabled:text-strawberry-300","disabled:border-strawberry-300","focus:outline-strawberry","focus:ring-strawberry",u),h=a()("border-red","hover:bg-red","text-red","active:bg-red-600","active:border-red-600","disabled:text-red-300","disabled:border-red-300","focus:outline-red",u),p=a()("border-green","hover:bg-green","text-green","active:bg-green-600","active:border-green-600","disabled:text-green-300","disabled:border-green-300","focus:outline-green",u),y=a()("border-mango","hover:bg-mango","text-mango","bg-notBlack","hover:text-notBlack"),x=a()("border-notBlack","hover:bg-notBlack","text-notBlack","focus:outline-notBlack","focus:ring-notBlack",u),v=a()("border-accent","text-accent","bg-foreground","hover:bg-accent","hover:text-text"),E=a()("bg-secondary","text-notWhite","dark:text-notBlack","hover:bg-secondary-600"),N=a()("bg-foreground","text-text","hover:bg-foreground-600","active:bg-foreground-700","disabled:bg-foreground-200"),S=a()("border-2","border-foreground","text-foreground","hover:bg-longan-200"),w=e=>a()("leading-none","align-middle","py-2","px-4","no-select",e.className,{[d]:"pill"===e.buttonStyle,[m]:"roundrect"===e.buttonStyle,[b]:"authn"===e.buttonStyle,[f]:"cherry"===e.color,[g]:"strawberry"===e.color,[y]:"mango"===e.color,[x]:"not-black"===e.color,[h]:"red"===e.color,[v]:"accent"===e.color,[p]:"green"===e.color,[E]:"secondary"===e.color,[N]:"authn-primary"===e.color,[S]:"authn-other"===e.color}),j=n.forwardRef((({buttonStyle:e,color:t,className:r,...l},a)=>{const o=w({buttonStyle:e,color:t,className:r,...l});return n.createElement("button",s({},l,{className:o,ref:a}),l.children)}));j.displayName="Button";const k=n.forwardRef((({buttonStyle:e,color:t,...r},l)=>{const a=w({buttonStyle:e,color:t,...r});return n.createElement("a",s({},r,{className:a,ref:l}),r.children)}));k.displayName="LinkButton"},77343:function(e,t,r){r.d(t,{_:function(){return i}});var l=r(71860),a=r(2735),n=r(29598),o=r(94159),s=r(99838);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},c.apply(this,arguments)}(0,n.ZP)({resolved:{},chunkName:()=>"hookform-devtools",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:()=>r.e(7e3).then(r.t.bind(r,8077,23)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return r(t)},resolve:()=>8077},{resolveComponent:e=>e.DevTool,ssr:!1});const i=()=>{const e=l.S.moderation.maintenance.dashboard.fillGap.useMutation(),t=(0,o.useCallback)((t=>{e.mutate({endDate:t.endDate.toISOString(),startDate:t.startDate.toISOString(),startingProjectId:t.startProjectId})}),[e]),{register:r,control:n,handleSubmit:i,formState:u}=(0,s.cI)({defaultValues:{startProjectId:0}});return o.createElement("form",{className:"not-prose flex flex-col gap-4",onSubmit:i(t)},o.createElement("fieldset",{className:"flex flex-col gap-2"},o.createElement("label",{htmlFor:"startDate",className:"text-lg"},"gap start date (local time)"),o.createElement("input",c({type:"datetime-local"},r("startDate",{required:!0,valueAsDate:!0})))),o.createElement("fieldset",{className:"flex flex-col gap-2"},o.createElement("label",{htmlFor:"endDate",className:"text-lg"},"gap end date (local time)"),o.createElement("input",c({type:"datetime-local"},r("endDate",{required:!0,valueAsDate:!0})))),o.createElement("fieldset",{className:"flex flex-col gap-2"},o.createElement("label",{htmlFor:"startProjectId",className:"text-lg"},"starting project ID (should be 0 in almost all cases)"),o.createElement("input",c({type:"number",step:1,min:0},r("startProjectId",{required:!0,valueAsNumber:!0})))),o.createElement("div",{className:"flex flex-row gap-2"},o.createElement(a.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit"},"start gap fill"),u.isSubmitSuccessful?o.createElement("span",{className:"text-green"},"Job scheduled successfully!"):null),null)}},53908:function(e,t,r){r.d(t,{i:function(){return g}});var l=r(71860),a=r(67920),n=r(59605),o=r(89109),s=r(94159),c=r(32956),i=r.n(c),u=r(99838),d=r(2735);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},m.apply(this,arguments)}(0,r(29598).ZP)({resolved:{},chunkName:()=>"hookform-devtools",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:()=>r.e(7e3).then(r.t.bind(r,8077,23)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return r(t)},resolve:()=>8077},{resolveComponent:e=>e.DevTool,ssr:!1});const b=(e,{isHighlighted:t})=>s.createElement("div",{className:(t?"bg-strawberry-200":"")+" px-3 leading-relaxed"},e.handle),f=({containerProps:e,children:t})=>s.Children.count(t)?s.createElement("div",m({},e,{className:"cohost-shadow-light not-prose cohost-shadow-light dark:cohost-shadow-dark absolute mt-3 w-fit rounded-lg bg-notWhite py-3"}),t):null,g=()=>{const[e,t]=(0,s.useTransition)(),[r,c]=(0,s.useState)(""),{projects:g}=(0,n.cI)(r,{skipMinimum:!0}),h=l.S.moderation.maintenance.notifications.rebuildForProject.useMutation(),p=(0,s.useId)(),{isBrowser:y}=(0,a.NS)(),{register:x,control:v,setValue:E,handleSubmit:N,formState:S,reset:w}=(0,u.cI)({defaultValues:{handle:"",priority:!1}}),j=(0,s.useCallback)(((e,t)=>{E("handle",t.suggestionValue)}),[E]),k=(0,s.useCallback)((({value:e})=>{t((()=>{c(e)}))}),[]),A=(0,s.useCallback)((()=>{t((()=>{c("")}))}),[]);return s.createElement("form",{className:"not-prose flex flex-col gap-4",onSubmit:N((async e=>{await h.mutateAsync({projectHandle:o.UC.parse(e.handle),priority:e.priority}),w()}))},s.createElement("fieldset",{className:"flex flex-col gap-2"},s.createElement("label",{htmlFor:`${p}-handle`,className:"text-lg"},"project handle"),s.createElement(u.Qr,{control:v,name:"handle",rules:{required:"Handle is required!"},render:({field:e})=>s.createElement(i(),{suggestions:g??[],getSuggestionValue:e=>e.handle,inputProps:{...e,id:`${p}-handle`,className:"focus:border-cherry"},onSuggestionSelected:j,onSuggestionsFetchRequested:k,onSuggestionsClearRequested:A,renderSuggestion:b,renderSuggestionsContainer:f})})),s.createElement("fieldset",{className:"flex flex-col gap-2"},s.createElement("div",{className:"flex flex-row items-center gap-2"},s.createElement("label",{htmlFor:`${p}-priority`,className:"text-lg"},"run immediately?"),s.createElement("input",m({type:"checkbox",className:"bg-notWhite text-cherry"},x("priority"),{id:`${p}-priority`}))),s.createElement("span",{className:"text-sm italic"},"creates the rebuild job with priority 1. use sparingly.")),s.createElement("div",{className:"flex flex-row gap-2"},s.createElement(d.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit"},"rebuild"),S.isSubmitSuccessful?s.createElement("span",{className:"text-green"},"Submitted successfully!"):null),null)}},76693:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var l=r(12093),a=r(46202),n=r(990),o=r(94159),s=r(90275),c=r(53908),i=r(77343),u=r(71860),d=r(2735),m=r(99838);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},b.apply(this,arguments)}const f=()=>{const e=u.S.moderation.maintenance.rebuildEagerPosts.useMutation(),{register:t,handleSubmit:r,formState:l}=(0,m.cI)({defaultValues:{startAtPostId:1,batchSize:50,rebuildAll:!1}});return o.createElement("form",{className:"not-prose flex flex-col gap-4",onSubmit:r((async t=>{await e.mutateAsync({startAtPostId:t.startAtPostId,batchSize:t.batchSize,rebuildAll:t.rebuildAll})}))},o.createElement("fieldset",{className:"flex flex-col gap-2"},o.createElement("label",{className:"text-lg"},"starting post ID",o.createElement("input",b({type:"number",min:1},t("startAtPostId",{required:!0,valueAsNumber:!0}))))),o.createElement("fieldset",{className:"flex flex-col gap-2"},o.createElement("label",{className:"text-lg"},"batch size",o.createElement("input",b({type:"number",min:1,max:1e3},t("batchSize",{required:!0,valueAsNumber:!0}))))),o.createElement("fieldset",{className:"flex flex-col gap-2"},o.createElement("div",{className:"flex flex-row items-center gap-2"},o.createElement("label",{className:"text-lg"},"rebuild posts older than yesterday?",o.createElement("input",b({type:"checkbox"},t("rebuildAll")))))),o.createElement("div",{className:"flex flex-row gap-2"},o.createElement(d.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit"},"rebuild"),l.isSubmitSuccessful?o.createElement("span",{className:"text-green"},"Submitted successfully!"):null))};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},g.apply(this,arguments)}const h=()=>{const e=u.S.moderation.maintenance.dashboard.rebuildForProject.useMutation(),t=(0,o.useCallback)((t=>{e.mutate({projectId:t.projectId})}),[e]),{register:r,control:l,handleSubmit:a,formState:n}=(0,m.cI)({defaultValues:{projectId:0}});return o.createElement("form",{className:"not-prose flex flex-col gap-4",onSubmit:a(t)},o.createElement("fieldset",{className:"flex flex-col gap-2"},o.createElement("label",{className:"text-lg"},"project id:",o.createElement("input",g({type:"number",step:1,min:0},r("projectId",{required:!0,valueAsNumber:!0}))))),o.createElement("div",{className:"flex flex-row gap-2"},o.createElement(d.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit"},"rebuild"),n.isSubmitSuccessful?o.createElement("span",{className:"text-green"},"Job scheduled successfully!"):null),null)};var p=()=>o.createElement(o.Fragment,null,o.createElement(s.ql,{title:"cache maintenance"}),o.createElement("div",{className:"flex flex-col gap-4 py-4 prose-headings:m-0"},o.createElement("h1",null,"cache maintenance"),o.createElement("a",{href:l.ZP.public.moderation.home().toString()},o.createElement(a.Z,{className:"inline h-6 w-6"}),"back to moderation home"),o.createElement("div",{className:"mb-2 flex flex-row items-start gap-4\n                    rounded-lg border-2 border-red-700 bg-red-200 p-4\n                    text-notBlack prose-p:my-2"},o.createElement("p",{className:"flex-shrink-0"},o.createElement(n.Z,{className:"inline h-6 w-6 text-red-700"})),o.createElement("div",null,o.createElement("p",null,"WARNING! This page contains potentially destructive actions! Please refrain from Fucking Around And Finding Out!"))),o.createElement("hr",null),o.createElement("h2",null,"rebuild timeline for individual project"),o.createElement(h,null),o.createElement("hr",null),o.createElement("h2",null,"rebuild notification feed for individual project"),o.createElement(c.i,null),o.createElement("hr",null),o.createElement("h2",null,"fill in gaps in cached dashboards"),o.createElement(i._,null),o.createElement("hr",null),o.createElement("h2",null,"rebuild eager posts (tag search, number of comments, etc.)"),o.createElement(f,null)))},46202:function(e,t,r){var l=r(94159);const a=l.forwardRef((function({title:e,titleId:t,...r},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}));t.Z=a}}]);
//# sourceMappingURL=client-preact-components-pages-moderation-cache-maintenance.818431377fad073ef483.js.map