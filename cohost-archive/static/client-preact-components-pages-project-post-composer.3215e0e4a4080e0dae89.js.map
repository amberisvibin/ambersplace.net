{"version":3,"file":"client-preact-components-pages-project-post-composer.3215e0e4a4080e0dae89.js","mappings":"oPAoBO,MAAMA,EAERC,IACD,MAAM,QAAEC,EAAO,QAAEC,EAAO,iBAAEC,EAAgB,gBAAEC,GAAoBJ,EAC1DK,GAAQC,EAAAA,EAAAA,OAENC,KAAMC,GACVC,EAAAA,EAAAA,MAAAA,qBAAAA,SACI,CAAEC,cAAeV,EAAMU,eACvB,CACIC,UAAU,KAIhB,UAAEC,IAAcC,EAAAA,EAAAA,MAChBC,GAAUC,EAAAA,EAAAA,UAAQ,IAAMH,KAAeV,GAAS,CAACU,EAAWV,IAE5Dc,GAAYD,EAAAA,EAAAA,UAAQ,IAClBf,EAAMU,cACC,wBAGPV,EAAME,QACC,yBAGJ,yBACR,CAACF,EAAMU,cAAeV,EAAME,UAE/B,OACIe,EAAAA,cAAAA,EAAAA,SAAA,KACIA,EAAAA,cAACC,EAAAA,GAAM,CAACC,MAAOH,IACfC,EAAAA,cAAA,OACIG,UAAU,+EACV,aAAYf,EAAMgB,SAEjBP,EACGG,EAAAA,cAACK,EAAAA,EAAqB,CAClBC,YAAaf,GAAsBgB,YACnCvB,QAASA,EACTC,QAASA,EACTuB,oBACIjB,GAAsBkB,sBAAuB,EAEjDvB,iBAAkBA,EAClBwB,KAAMnB,GAAsBoB,aAAe,GAC3CC,IAAKrB,GAAsBsB,YAAc,GACzC1B,gBAAiBA,IAGrBa,EAAAA,cAAA,OAAKG,UAAU,0GACXH,EAAAA,cAAA,SAAG,uGAEoD,IACnDA,EAAAA,cAAA,KACIc,KAAK,0IACLC,OAAO,SACPC,IAAI,cACP,0BAW7B,YACAlC,EAAoBmC,YAAc","sources":["webpack:///./preact/components/pages/project-post-composer.tsx"],"sourcesContent":["import { trpc } from \"@/client/lib/trpc\";\nimport { DisplayPrefs } from \"@/shared/types/display-prefs\";\nimport { AskId, PostId, ProjectHandle } from \"@/shared/types/ids\";\nimport { WireProjectModel } from \"@/shared/types/projects\";\nimport React, { FunctionComponent, useMemo } from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { useUserInfo } from \"../../providers/user-info-provider\";\nimport { PostComposerContainer } from \"../composer/container\";\nimport { useDynamicTheme } from \"../../hooks/dynamic-theme\";\n\ntype ProjectPostComposerProps = {\n    editingPostId?: PostId;\n    project: WireProjectModel;\n    shareOf?: { postId: PostId; handle: ProjectHandle };\n    alreadyPublished: boolean;\n    finishedRedirect?: string;\n    displayPrefs: DisplayPrefs;\n    responseToAskId?: AskId;\n};\n\nexport const ProjectPostComposer: FunctionComponent<\n    ProjectPostComposerProps\n> = (props) => {\n    const { project, shareOf, finishedRedirect, responseToAskId } = props;\n    const theme = useDynamicTheme();\n\n    const { data: postComposerSettings } =\n        trpc.posts.postComposerSettings.useQuery(\n            { editingPostId: props.editingPostId },\n            {\n                suspense: true,\n            }\n        );\n\n    const { activated } = useUserInfo();\n    const canPost = useMemo(() => activated || !!shareOf, [activated, shareOf]);\n\n    const pageTitle = useMemo(() => {\n        if (props.editingPostId) {\n            return \"go ahead, edit a post\";\n        }\n\n        if (props.shareOf) {\n            return \"go ahead, share a post\";\n        }\n\n        return \"go ahead, make a post\";\n    }, [props.editingPostId, props.shareOf]);\n\n    return (\n        <>\n            <Helmet title={pageTitle} />\n            <div\n                className=\"co-themed-box container mx-auto mt-8 flex max-w-3xl flex-grow flex-col gap-6\"\n                data-theme={theme.current}\n            >\n                {canPost ? (\n                    <PostComposerContainer\n                        initialPost={postComposerSettings?.editingPost}\n                        project={project}\n                        shareOf={shareOf}\n                        initialAdultContent={\n                            postComposerSettings?.defaultAdultContent ?? false\n                        }\n                        finishedRedirect={finishedRedirect}\n                        tags={postComposerSettings?.defaultTags ?? []}\n                        cws={postComposerSettings?.defaultCws ?? []}\n                        responseToAskId={responseToAskId}\n                    />\n                ) : (\n                    <div className=\"cohost-shadow-light dark:cohost-shadow-dark prose mx-auto w-full max-w-full rounded-lg bg-notWhite p-3\">\n                        <p>\n                            Since your account isn't activated yet, you can't\n                            post anything new. You can read more about this on{\" \"}\n                            <a\n                                href=\"https://help.antisoftware.club/support/solutions/articles/62000224749-details-on-invites-and-the-restrictions-on-un-activated-accounts/\"\n                                target=\"_blank\"\n                                rel=\"noreferrer\"\n                            >\n                                our support site.\n                            </a>\n                        </p>\n                    </div>\n                )}\n            </div>\n        </>\n    );\n};\n\nexport default ProjectPostComposer;\nProjectPostComposer.displayName = \"project-post-composer\";\n"],"names":["ProjectPostComposer","props","project","shareOf","finishedRedirect","responseToAskId","theme","useDynamicTheme","data","postComposerSettings","trpc","editingPostId","suspense","activated","useUserInfo","canPost","useMemo","pageTitle","React","Helmet","title","className","current","PostComposerContainer","initialPost","editingPost","initialAdultContent","defaultAdultContent","tags","defaultTags","cws","defaultCws","href","target","rel","displayName"],"sourceRoot":""}