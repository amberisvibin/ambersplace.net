"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8996],{70575:function(e,t,a){a.d(t,{H:function(){return n},h:function(){return r}});var l=a(94159);const n=l.createContext({adultFilterMode:"hide",isAdult:!1,categories:new Set,setAdultFilterMode:()=>{},categoryMatch:"any",setCategoryMatch:()=>{},sortOrder:"random",setSortOrder:()=>{}}),r=()=>(0,l.useContext)(n)},26225:function(e,t,a){a.d(t,{l:function(){return v}});var l=a(37111),n=a(76051),r=a(12093),s=a(94159),o=a(98074),c=a(62745),i=a(50196),u=a(46975),m=a(47071),d=a(51540),g=a(70575),p=a(55875),b=a(2403),y=a(96332),f=a(93410),E=a(44144);const h=({attachment:e})=>{const t=(0,c.Q)(),[a,l]=(0,s.useState)(t.gifsStartPaused?e.previewURL:e.fileURL),[n,r]=(0,s.useState)(!t.gifsStartPaused),o=(0,i.T)(a,300,1.2);return s.createElement("div",{className:"group relative"},s.createElement("img",{src:o(1),srcSet:`\n                ${o(1)} 1x,\n                ${o(2)} 2x,\n                ${o(3)} 3x,\n            `,alt:e.altText,className:"co-border aspect-[300/250] w-full border-b object-cover"}),e.previewURL!==e.fileURL&&s.createElement(m.I,{isPlaying:n,showPlay:e.previewURL!==e.fileURL,extraClasses:"absolute bottom-3 right-3 w-12",onPlay:()=>{r(!0),l(e.fileURL)},onPause:()=>{r(!1),l(e.previewURL)}}))},x=({listing:e})=>{const t=(0,s.useContext)(E.j);return s.createElement(p.v,{as:"div",className:"relative h-6"},s.createElement(p.v.Button,{className:"co-action-button cursor-pointer text-sm font-bold hover:underline"},s.createElement(y.Z,{className:"h-6 w-6 transition-transform ui-open:rotate-90"})),s.createElement(p.v.Items,{className:"co-meatball-items absolute right-0 top-8 z-30 flex min-w-max flex-col divide-y rounded-lg p-3  focus:!outline-none"},s.createElement(p.v.Item,null,s.createElement(f.X,{disabled:!1,onClick:()=>{t.send({type:"START_REPORT",artistAlleyListingId:e.id})},ItemIcon:b.Z,text:"report"}))))},v=({listing:e,project:t})=>{const a=(0,s.useMemo)((()=>(0,l.Ml)(e.body,new Date,{disableEmbeds:!0,externalLinksInNewTab:!0,hasCohostPlus:!1,renderingContext:"artistAlley"})),[e.body]),n=(0,o.rA)();return s.createElement("div",{"data-theme":n.current,className:"co-themed-box co-artist-alley-listing flex w-full flex-col rounded-lg border"},s.createElement("div",{className:"co-border flex flex-row items-center gap-2 border-b px-2 py-3"},s.createElement(d.t,{project:t,className:"h-8"}),s.createElement("a",{href:r.ZP.public.project.mainAppProfile({projectHandle:t.handle}).toString()},"@",t.handle),s.createElement("div",{className:"flex-1"},"Â "),e.adultContent?s.createElement("span",{className:"co-18-plus rounded-lg p-1 text-xs "},"18+"):null,s.createElement(x,{listing:e})),e.attachment&&s.createElement(h,{attachment:e.attachment}),s.createElement("div",{className:"co-prose prose p-2"},a),s.createElement("div",{className:"mx-2 my-3"},s.createElement(u.k,{as:"a",buttonColor:"",buttonSize:"regular",href:e.cta.link,extraClasses:"co-cta-button",target:"_blank"},e.cta.text)),e.categories.length>0&&s.createElement(w,{tags:e.categories}))},w=({tags:e})=>{const{categories:t}=(0,g.h)(),a=e.filter((e=>""!=e));return a.length?s.createElement("div",{className:"w-full max-w-full p-3"},s.createElement("div",{className:n.tw`co-tags relative w-full overflow-y-hidden break-words leading-none`},s.createElement("div",null,a.map((e=>s.createElement("button",{key:e,className:"mr-2 inline-block text-sm hover:underline "+(t.has(e)?"font-bold":""),onClick:()=>{t.has(e)?t.delete(e):t.add(e)}},"#",e)))))):null}},72228:function(e,t,a){a.d(t,{F:function(){return u}});var l=a(97244),n=a(34377),r=a(65443),s=a.n(r),o=a(94159),c=a(99838);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},i.apply(this,arguments)}const u=({style:e="light",showValidity:t=!0,name:a,control:r,rules:u,trigger:m,...d})=>{const{field:g,fieldState:p}=(0,c.bc)({name:a,control:r,rules:u}),{name:b,onChange:y}=g,[f,E]=(0,o.useState)();(0,o.useEffect)((()=>{g.ref(f)}),[f,g]);const{inputStyleClasses:h,contentDivStyleClasses:x,validityIconStyleClasses:v}=(0,o.useMemo)((()=>{switch(e){case"light":return{inputStyleClasses:"border-gray-600 text-notBlack\n                        placeholder:text-gray-600\n                        focus:border-notBlack disabled:border-gray-300",contentDivStyleClasses:"to-notWhite",validityIconStyleClasses:"bg-notWhite"};case"dynamic":return{inputStyleClasses:"co-styled-input",contentDivStyleClasses:"co-styled-input-content",validityIconStyleClasses:"co-styled-input-validity-icon"};default:return{inputStyleClasses:"border-gray-400 text-notWhite \n                        placeholder:text-gray-400\n                        focus:border-notWhite read-only:bg-gray-700",contentDivStyleClasses:"to-notBlack",validityIconStyleClasses:"bg-notBlack"}}}),[e]);return(0,o.useEffect)((()=>{f&&f.value&&f.value!==d.defaultValue&&f.value!==g.value&&!p.isTouched&&(y(f.value),m(b,{shouldFocus:!0}))}),[f,g.value,b,p.isTouched,y,d.defaultValue,m]),o.createElement("div",{className:"relative"},o.createElement("input",i({className:s()("\n                        w-full min-w-[15rem] rounded-lg border-2 bg-transparent\n                    ",h)},d,g,{ref:E})),t&&!d.readOnly&&p.isTouched?o.createElement(o.Fragment,null,o.createElement("div",{className:s()("\n                                absolute bottom-0 right-9 top-0 my-auto h-6 w-3 \n                                bg-gradient-to-r from-transparent\n                            ",x)}),p.invalid?o.createElement(l.Z,{className:s()("\n                                    absolute bottom-0 right-3 top-0 my-auto h-6 \n                                    w-6 text-red\n                                ",v)}):o.createElement(n.Z,{className:s()("\n                                    absolute bottom-0 right-3 top-0 my-auto h-6\n                                    w-6 bg-notWhite text-green\n                                ",v)})):null)}},37439:function(e,t,a){a.d(t,{l:function(){return o}});var l=a(76051),n=a(73969),r=a(94159),s=a(99838);const o=({options:e,...t})=>{const{field:a}=(0,s.bc)(t),o=a.value;return r.createElement("div",{className:"flex flex-row flex-wrap gap-2 px-3 py-2"},e.map((e=>r.createElement("div",{key:`selected-token-${e}`,className:"group h-max cursor-pointer select-none"},r.createElement("button",{className:l.tw`co-token flex items-center justify-start gap-1 rounded-lg px-2 py-1 leading-none ${o.includes(e)?"co-active":""}`,onClick:t=>{t.stopPropagation(),o.includes(e)?a.onChange(o.filter((t=>t!==e))):a.onChange([...o,e])},type:"button"},r.createElement(n.Z,{className:"inline-block h-3.5"}),r.createElement("span",{className:"block"},e))))))}},90402:function(e,t,a){a.r(t),a.d(t,{ManageArtistAlleyListingPage:function(){return g}});var l=a(94159),n=a(26225),r=a(12093),s=a(71860),o=a(99838),c=a(4337),i=a(72228),u=a(37439),m=a(98074);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},d.apply(this,arguments)}const g=({project:e,user:t,listing:a})=>{const g=s.S.artistAlley.moderator.updateListing.useMutation(),p=s.S.artistAlley.getCategories.useQuery(),{control:b,register:y,handleSubmit:f,trigger:E,watch:h,setValue:x,setError:v,formState:w,clearErrors:N,getValues:C}=(0,o.cI)({defaultValues:{body:a.body,adult:a.adultContent,ctaText:a.cta.text,ctaLink:a.cta.link,categories:a.categories}}),S=(0,l.useCallback)((async e=>{await g.mutateAsync({id:a.id,body:e.body,adult:e.adult,ctaText:e.ctaText,ctaLink:e.ctaLink,categories:e.categories}),location.reload()}),[g]),k=(0,m.rA)();return l.createElement("div",{className:"co-themed-box co-settings container mx-auto mt-12 flex flex-col gap-4 rounded-lg p-3","data-theme":k.current},l.createElement("h1",{className:"text-4xl font-bold"},"manage artist alley listing"),l.createElement("div",{className:"co-prose prose flex w-full flex-row gap-4 p-3"},l.createElement("div",null,l.createElement("div",{className:"w-[300px] max-w-[300px]"},l.createElement(n.l,{listing:a,project:e})),l.createElement("div",{className:"flex-shrink"},l.createElement("ul",null,l.createElement("li",null,"user: ",t.email," (",l.createElement("a",{href:r.ZP.public.moderation.manageUser({userId:t.userId}).toString()},"manage"),")"),l.createElement("li",null,"project: ",e.handle," (",l.createElement("a",{href:r.ZP.public.moderation.manageProject({projectHandle:e.handle}).toString()},"manage"),")"),l.createElement("li",null,"listing: ",a.id),l.createElement("li",null,"created at: ",a.createdAt),l.createElement("li",null,"num weeks: ",a.numWeeks),l.createElement("li",null,"status: ",a.status),l.createElement("li",null,"payment status:"," ",l.createElement("a",{href:`https://dashboard.stripe.com/payments/${a.stripePaymentIntentId}`},a.paymentStatus)),l.createElement("li",null,"notes:",l.createElement("br",null),l.createElement("blockquote",null,a.notes))))),l.createElement("div",null,l.createElement("h4",{className:"h4"},"edit listing"),l.createElement("form",{className:"flex flex-col gap-4",onSubmit:f(S)},l.createElement("label",null,"body",l.createElement(c.V,{control:b,name:"body",minRows:4,autoComplete:"off",className:"co-styled-input rounded-lg border-2"})),l.createElement("label",null,"CTA text",l.createElement(i.F,{control:b,name:"ctaText",trigger:E,type:"text",style:"dynamic"})),l.createElement("label",null,"CTA link",l.createElement(i.F,{control:b,name:"ctaLink",trigger:E,type:"text",style:"dynamic"})),l.createElement("label",null,"categories",l.createElement(u.l,{control:b,name:"categories",options:p.data??[]})),l.createElement("label",null,"adult content",l.createElement("input",d({type:"checkbox"},y("adult"),{className:"rounded-checkbox ml-3"}))),l.createElement("button",{className:"co-filled-button rounded-lg px-3 py-2.5 font-bold",type:"submit",disabled:w.isSubmitting},"submit edits")))))};g.displayName="moderation/manage-artist-alley-listing",t.default=g}}]);
//# sourceMappingURL=client-preact-components-pages-moderation-manage-artist-alley-listing.fd03d508a65201bae50b.js.map