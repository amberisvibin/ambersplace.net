"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4766],{2735:function(e,t,r){r.d(t,{Qj:function(){return E},zx:function(){return I}});var o=r(65443),n=r.n(o),a=r(94159),l=r(6285);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},i.apply(this,arguments)}const d=l.z.enum(["pill","roundrect","authn"]),s=l.z.enum(["cherry","strawberry","mango","not-black","red","green","accent","secondary","authn-primary","authn-other"]),c=(l.z.object({buttonStyle:d,color:s,className:l.z.string().optional()}),n()("bg-notWhite","hover:text-notWhite")),u=n()("font-atkinson","font-bold","rounded-full","border-2"),g=n()("body-2","rounded-lg"),p=n()("flex","h-12","items-center","justify-center","rounded-lg","px-6","text-lg"),b=n()("border-cherry","hover:bg-cherry","text-cherry","active:bg-cherry-600","active:border-cherry-600","disabled:text-cherry-300","disabled:border-cherry-300","focus:outline-cherry","focus:ring-cherry",c),m=n()("border-strawberry","hover:bg-strawberry","text-strawberry","active:bg-strawberry-600","active:border-strawberry-600","disabled:text-strawberry-300","disabled:border-strawberry-300","focus:outline-strawberry","focus:ring-strawberry",c),z=n()("border-red","hover:bg-red","text-red","active:bg-red-600","active:border-red-600","disabled:text-red-300","disabled:border-red-300","focus:outline-red",c),y=n()("border-green","hover:bg-green","text-green","active:bg-green-600","active:border-green-600","disabled:text-green-300","disabled:border-green-300","focus:outline-green",c),_=n()("border-mango","hover:bg-mango","text-mango","bg-notBlack","hover:text-notBlack"),f=n()("border-notBlack","hover:bg-notBlack","text-notBlack","focus:outline-notBlack","focus:ring-notBlack",c),h=n()("border-accent","text-accent","bg-foreground","hover:bg-accent","hover:text-text"),x=n()("bg-secondary","text-notWhite","dark:text-notBlack","hover:bg-secondary-600"),v=n()("bg-foreground","text-text","hover:bg-foreground-600","active:bg-foreground-700","disabled:bg-foreground-200"),j=n()("border-2","border-foreground","text-foreground","hover:bg-longan-200"),w=e=>n()("leading-none","align-middle","py-2","px-4","no-select",e.className,{[u]:"pill"===e.buttonStyle,[g]:"roundrect"===e.buttonStyle,[p]:"authn"===e.buttonStyle,[b]:"cherry"===e.color,[m]:"strawberry"===e.color,[_]:"mango"===e.color,[f]:"not-black"===e.color,[z]:"red"===e.color,[h]:"accent"===e.color,[y]:"green"===e.color,[x]:"secondary"===e.color,[v]:"authn-primary"===e.color,[j]:"authn-other"===e.color}),I=a.forwardRef((({buttonStyle:e,color:t,className:r,...o},n)=>{const l=w({buttonStyle:e,color:t,className:r,...o});return a.createElement("button",i({},o,{className:l,ref:n}),o.children)}));I.displayName="Button";const E=a.forwardRef((({buttonStyle:e,color:t,...r},o)=>{const n=w({buttonStyle:e,color:t,...r});return a.createElement("a",i({},r,{className:n,ref:o}),r.children)}));E.displayName="LinkButton"},29785:function(e,t,r){r.r(t),r.d(t,{ManagePermissionsForm:function(){return u}});var o=r(2735),n=r(12093),a=r(29289),l=r(86036),i=r.n(l),d=r(94159),s=r(99838);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},c.apply(this,arguments)}const u=({permissions:e,user:t})=>{const{register:r,handleSubmit:l}=(0,s.cI)(),{register:u,handleSubmit:g}=(0,s.cI)(),p=a.y3.options.filter((t=>-1===e.indexOf(t))),b=async e=>{try{const r={userId:t.userId,...e};"grant"===e.action?await i().post(n.ZP.public.apiV1.moderation.grantOrRevokePermission().toString(),r):await i().delete(n.ZP.public.apiV1.moderation.grantOrRevokePermission().toString(),{data:r})}finally{window.location.reload()}};return d.createElement(d.Fragment,null,d.createElement("form",{className:"flex max-w-fit flex-col gap-2 rounded-lg border border-accent p-3",onSubmit:l(b)},d.createElement("h4",{className:"h4"},"grant permissions"),d.createElement("input",c({type:"hidden",value:"grant"},r("action"))),"permission to grant:",p.map((e=>d.createElement("div",{key:e},d.createElement("input",c({type:"radio",id:`grant-permission-${e}`,value:e},r("permission",{required:!0}))),d.createElement("label",{htmlFor:`permission-${e}`},e)))),"reason for granting permission:",d.createElement("textarea",r("reason",{required:!0})),d.createElement(o.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit"},"grant permission")),d.createElement("form",{className:"flex max-w-fit flex-col gap-2 rounded-lg border border-accent p-3",onSubmit:g(b)},d.createElement("h4",{className:"h4"},"revoke permissions"),d.createElement("input",c({type:"hidden",value:"revoke"},u("action"))),"permission to revoke:",e.map((e=>d.createElement("div",{key:e},d.createElement("input",c({type:"radio",id:`revoke-permission-${e}`,value:e},u("permission",{required:!0}))),d.createElement("label",{htmlFor:`permission-${e}`},e)))),"reason for revoking permission:",d.createElement("textarea",u("reason",{required:!0})),d.createElement(o.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit"},"revoke permission")))}},29289:function(e,t,r){r.d(t,{C7:function(){return m},RC:function(){return B},RG:function(){return u},S5:function(){return S},s3:function(){return C},y3:function(){return c}});var o=r(6285),n=r(45793),a=r(89109),l=r(85771),i=r(22018),d=r(70769);const s=o.z.object({postId:a.rU,headline:o.z.string(),publishedAt:o.z.string().optional(),filename:o.z.string(),transparentShareOfPostId:a.rU.nullable(),shareOfPostId:a.rU.nullable(),state:i.e,numComments:o.z.number(),cws:o.z.string().array(),tags:o.z.string().array(),hasCohostPlus:o.z.boolean(),pinned:o.z.boolean(),commentsLocked:o.z.boolean(),sharesLocked:o.z.boolean()}),c=(s.extend({adultContent:o.z.boolean(),shareOfPostId:a.rU.nullable(),updatedAt:o.z.string(),blocks:l.gK.array(),attachments:o.z.object({attachmentId:a.I,filename:o.z.string()}).array()}).extend({adultContentOverride:o.z.boolean(),projectId:a.G9}),o.z.enum(["grant_all_permissions","moderator","read_only","suspended","no_new_projects","no_artist_alley"])),u=o.z.object({canInteract:n.B,canEdit:n.B,canHide:n.B,comment:o.z.object({body:o.z.string(),children:o.z.tuple([]),commentId:a.do,deleted:o.z.boolean(),postId:a.rU,postedAtISO:o.z.string(),inReplyTo:a.do.nullable(),hasCohostPlus:o.z.boolean(),hidden:o.z.boolean()}),poster:o.z.object({projectId:a.G9})}),g=o.z.lazy((()=>o.z.object({comment:o.z.object({commentId:a.do,postedAtISO:a.iV,deleted:o.z.boolean(),body:o.z.string(),children:g.array(),postId:a.rU,inReplyTo:a.do.nullable(),hasCohostPlus:o.z.boolean(),hidden:o.z.boolean()}),canInteract:n.B,canEdit:n.B,canHide:n.B,poster:d.Fx.optional()}))),p=(o.z.object({initial:o.z.string(),expanded:o.z.string().optional()}),o.z.enum(["none","log-in-first","deleted","unpublished","adult-content","blocked"])),b=o.z.object({spans:o.z.array(o.z.object({startIndex:o.z.number(),endIndex:o.z.number(),ast:o.z.string()})),readMoreIndex:o.z.number().nullable()}),m=o.z.lazy((()=>s.extend({blocks:l.oD.array(),plainTextBody:o.z.string(),postingProject:d.Fx,shareTree:m.array(),numSharedComments:o.z.number(),relatedProjects:d.Fx.array(),singlePostPageUrl:o.z.string().url(),effectiveAdultContent:o.z.boolean(),isEditor:o.z.boolean(),hasAnyContributorMuted:o.z.boolean(),contributorBlockIncomingOrOutgoing:o.z.boolean(),postEditUrl:o.z.string().url(),isLiked:o.z.boolean(),canShare:o.z.boolean(),canPublish:o.z.boolean(),limitedVisibilityReason:p,astMap:b,responseToAskId:a.iB.nullable()}))),z=(o.z.object({userId:a.Et,email:o.z.string(),emailVerified:o.z.boolean(),collapseAdultContent:o.z.boolean(),isAdult:o.z.boolean(),twoFactorEnabled:o.z.boolean()}),o.z.enum(["like","comment","share","follow","groupedLike","groupedFollow","groupedShare"])),y=o.z.object({type:z,createdAt:o.z.string(),fromProjectId:a.G9}),_=o.z.object({type:z,createdAt:o.z.string(),fromProjectIds:a.G9.array(),oldestCreatedAt:o.z.string()}),f=y.extend({toPostId:a.rU}),h=_.extend({toPostId:a.rU}),x=f.extend({type:o.z.literal("like"),relationshipId:a.cu}),v=h.extend({type:o.z.literal("groupedLike"),relationshipIds:a.cu.array()}),j=_.extend({type:o.z.literal("groupedFollow")}),w=h.extend({type:o.z.literal("groupedShare"),transparentShare:o.z.boolean(),sharePostIds:a.rU.array()}),I=f.extend({type:o.z.literal("comment"),commentId:a.do,inReplyTo:a.do.nullable()}),E=f.extend({type:o.z.literal("share"),sharePostId:a.rU,transparentShare:o.z.boolean()}),k=y.extend({type:o.z.literal("follow")}),B=o.z.discriminatedUnion("type",[x,I,E,k]),C=o.z.union([v,j,w]),S=o.z.union([B,C]),P=(o.z.enum(["edit_comment","delete_comment","edit_post","edit_project_ugc","edit_project_mod_flags","grant_permission","revoke_permission","add_editor","remove_editor","edit_project_flags","edit_user","2fa_login_failed","2fa_reset","2fa_reset_failed","artist_alley_approved","artist_alley_rejected","artist_alley_mod_edited"]),o.z.object({entryId:o.z.string(),loggedAt:o.z.string()})),A=P.extend({userId:a.Et}),O=P.extend({userId:a.Et,permission:c,changedBy:a.Et,reason:o.z.string()}),T=P.extend({projectId:a.G9,userId:a.Et,changedBy:a.Et,reason:o.z.string()}),U=P.extend({projectId:a.G9,oldAdultContent:o.z.boolean(),oldAdultContentOverride:o.z.boolean(),newAdultContent:o.z.boolean(),newAdultContentOverride:o.z.boolean(),changedBy:a.Et,reason:o.z.string()}),N=P.extend({projectId:a.G9,changedBy:a.Et,reason:o.z.string(),oldFlags:d.Xw.array(),newFlags:d.Xw.array()}),L=P.extend({userId:a.Et,oldEmail:o.z.string(),newEmail:o.z.string(),oldPendingEmail:o.z.string().nullable(),newPendingEmail:o.z.string().nullable(),oldUsername:o.z.string(),newUsername:o.z.string()}),F=P.extend({postId:a.rU,oldHeadline:o.z.string(),newHeadline:o.z.string(),oldBlocks:l.gK.array(),newBlocks:l.gK.array(),oldState:i.e,newState:i.e,oldAdultContent:o.z.boolean().optional(),newAdultContent:o.z.boolean().optional(),oldAdultContentOverride:o.z.boolean().optional(),newAdultContentOverride:o.z.boolean().optional(),oldCws:o.z.string().array().optional(),newCws:o.z.string().array().optional(),oldCommentsLocked:o.z.boolean().optional(),newCommentsLocked:o.z.boolean().optional()}),R={edit_comment:P.extend({logType:o.z.literal("edit_comment")}),delete_comment:P.extend({logType:o.z.literal("delete_comment")}),grant_permission:O.extend({logType:o.z.literal("grant_permission")}),revoke_permission:O.extend({logType:o.z.literal("revoke_permission")}),edit_post:F.extend({logType:o.z.literal("edit_post")}),edit_project_ugc:P.extend({logType:o.z.literal("edit_project_ugc")}),edit_project_mod_flags:U.extend({logType:o.z.literal("edit_project_mod_flags")}),add_editor:T.extend({logType:o.z.literal("add_editor")}),remove_editor:T.extend({logType:o.z.literal("remove_editor")}),edit_project_flags:N.extend({logType:o.z.literal("edit_project_flags")}),edit_user:L.extend({logType:o.z.literal("edit_user")}),"2fa_login_failed":A.extend({logType:o.z.literal("2fa_login_failed")}),"2fa_reset":A.extend({logType:o.z.literal("2fa_reset")}),"2fa_reset_failed":A.extend({logType:o.z.literal("2fa_reset_failed")}),artist_alley_approved:P.extend({logType:o.z.literal("artist_alley_approved"),listingId:a.y1,changedBy:a.Et}),artist_alley_rejected:P.extend({logType:o.z.literal("artist_alley_rejected"),listingId:a.y1,changedBy:a.Et,rejectionReason:o.z.string()}),artist_alley_mod_edited:P.extend({logType:o.z.literal("artist_alley_mod_edited"),listingId:a.y1,changedBy:a.Et})},D=(o.z.discriminatedUnion("logType",[R.edit_comment,R.delete_comment,R.grant_permission,R.revoke_permission,R.edit_post,R.edit_project_ugc,R.add_editor,R.remove_editor]),o.z.enum(["active","past_due","unpaid","canceled","incomplete","incomplete_expired","trialing"]));o.z.object({expirationDate:a.iV,status:D}),o.z.object({defaultAdultContent:o.z.boolean(),editingPost:m.optional(),defaultCws:o.z.string().array(),defaultTags:o.z.string().array()}),o.z.object({projects:o.z.array(o.z.object({project:d.Fx,projectPinned:o.z.boolean(),latestPost:m.nullable()})),nextCursor:o.z.number().nullable()}),o.z.enum(["recently-posted","followed-asc","followed-desc","alpha-asc","alpha-desc"])}}]);
//# sourceMappingURL=client-preact-components-pages-moderation-manage-user-manage-permissions.ecd459bb776a6f38624c.js.map