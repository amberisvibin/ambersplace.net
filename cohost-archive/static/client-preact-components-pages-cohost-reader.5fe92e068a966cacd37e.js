"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8584],{4397:function(e,t,a){a.d(t,{U:function(){return d}});var l=a(86058),n=a(34377),r=a(97244),o=a(65443),s=a.n(o),c=a(94159),i=a(60035);const d=e=>{const[t,a]=(0,c.useState)(e.initial??!1);return c.createElement(l.r,{checked:t,onChange:t=>{a(t),e.onChange(t)},className:s()("flex flex-row items-center rounded-lg px-2 py-2 text-notWhite",{[i.h$]:"small"===e.buttonSize,[i.I1]:"regular"===e.buttonSize,"bg-cherry-500 hover:bg-cherry-600 active:bg-cherry-700":t,"bg-cherry-800 hover:bg-cherry-600 active:bg-cherry-700":!t})},e.label," ",t?c.createElement(n.Z,{className:"h-4"}):c.createElement(r.Z,{className:"h-4"}))}},82225:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var l=a(12093),n=a(94159),r=a(90275),o=a(38934),s=a(56797);const c={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"};var i=a(81732),d=a(71860),u=a(55875),p=a(46102),m=a(46975),f=a(93410),h=a(4397),g=a(74578),v=a(81150),b=a(35409);const w=e=>{const[t,a]=(0,n.useState)(!0),[r,o]=(0,n.useState)(!0),[s,c]=(0,n.useState)(!0),[i,w]=(0,n.useState)(!1),[x,E]=(0,n.useState)(!1);(0,n.useEffect)((()=>{E(!0)}),[e.activeProject]);const k=(0,n.useCallback)((e=>{x&&e&&(e.scrollTo(0,0),E(!1))}),[x]),j=d.S.projects.followedFeed.pinProject.useMutation(),y=d.S.projects.followedFeed.unpinProject.useMutation(),P=d.S.useContext(),S=d.S.projects.followedFeed.isPinned.useQuery({projectId:e.activeProject?.project.projectId??-99999},{enabled:!!e.activeProject,initialData:e.activeProject?.pinned}),C=e.activeProject?l.ZP.public.project.mainAppProfile({projectHandle:e.activeProject.project.handle}).toString():"";return n.createElement("div",{className:"flex flex-grow flex-col [flex-basis:40%]"},n.createElement(n.Suspense,{fallback:n.createElement(v.g,{className:"mx-auto my-auto"})},e.activeProject?n.createElement(n.Fragment,null,n.createElement("div",{className:"flex flex-row justify-end gap-3 p-4"},n.createElement(h.U,{buttonSize:"small",label:"pins at top",onChange:e=>w(e),initial:i}),n.createElement(h.U,{buttonSize:"small",label:"show shares",onChange:e=>a(e),initial:t}),n.createElement(h.U,{buttonSize:"small",label:"show replies",onChange:e=>o(e),initial:r}),n.createElement(h.U,{buttonSize:"small",label:"show asks",onChange:e=>c(e),initial:s}),e.activeProject.project.askSettings.enabled?n.createElement(m.k,{as:"a",buttonColor:"cherry",buttonSize:"small",href:l.ZP.public.project.ask({projectHandle:e.activeProject.project.handle}).toString()},"ask"):null,n.createElement(u.v,{as:"div",className:"relative"},n.createElement(u.v.Button,{as:n.Fragment},(({open:e})=>{const t=e?"bg-cherry-700":"";return n.createElement(m.k,{buttonColor:"cherry",buttonSize:"small",extraClasses:t},"manage")})),n.createElement(u.v.Items,{className:"cohost-shadow-dark absolute right-0 top-12 z-30 flex min-w-max flex-col gap-3 rounded-lg bg-notWhite p-3 text-notBlack focus:!outline-none"},S.data?n.createElement(u.v.Item,null,n.createElement(f.X,{ItemIcon:g.G,disabled:S.isFetching,text:"unpin from following view",onClick:async()=>{e.activeProject&&(await y.mutateAsync({projectId:e.activeProject.project.projectId}),await P.projects.followedFeed.query.invalidate(),await P.projects.followedFeed.isPinned.invalidate({projectId:e.activeProject.project.projectId}))}})):n.createElement(u.v.Item,null,n.createElement(f.X,{ItemIcon:g.G,disabled:S.isFetching,text:"pin to following view",onClick:async()=>{e.activeProject&&(await j.mutateAsync({projectId:e.activeProject.project.projectId}),await P.projects.followedFeed.query.invalidate(),await P.projects.followedFeed.isPinned.invalidate({projectId:e.activeProject.project.projectId}))}})),n.createElement(u.v.Item,null,n.createElement(f.X,{as:"a",ItemIcon:p.Z,text:"go to profile",href:C}))))),n.createElement("div",{className:"flex flex-col items-center overflow-y-auto",ref:k},n.createElement(b.Z,{handle:e.activeProject.project.handle,pinnedPostsAtTop:i,hideReplies:!r,hideShares:!t,hideAsks:!s,keepPreviousData:!1}))):null))};w.displayName="CohostReaderFeedPane";var x=w,E=a(22233),k=a(70700),j=a(97287),y=a(68095),P=a(13828),S=a(65443),C=a.n(S),N=a(61888),I=a.n(N),A=a(51028);function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},O.apply(this,arguments)}const T=e=>n.createElement("svg",O({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 37"},e),n.createElement("path",{d:"M29.9375 34.712c-4.5219 1.3518-8.8029 1.9644-12.843 1.8377-4.0401-.1267-7.50633-1.0808-10.39884-2.8624-2.89253-1.7814-4.8862-4.5046-5.981084-8.1695-1.101144-3.6858-.929664-7.062.514464-10.1285 1.44415-3.0666 3.82337-5.75117 7.13767-8.05372C11.681 5.03302 15.5992 3.2058 20.1211 1.85394 24.6221.508325 28.8858-.104798 32.9123.014595 36.9387.133964 40.4019 1.07761 43.3017 2.8455c2.8999 1.76792 4.8972 4.48429 5.9921 8.1491 1.0949 3.6649.9166 7.0374-.5349 10.1176-1.4514 3.0802-3.826 5.7804-7.1235 8.1008-3.2976 2.3204-7.1969 4.1534-11.6979 5.499Z",fill:"currentColor"}));var F=a(51540);const L=new Map([["recently-posted","sort by last post"],["followed-asc","sort by follow date (old–new)"],["followed-desc","sort by follow date (new–old)"],["alpha-asc","sort by handle (A–Z)"],["alpha-desc","sort by handle (Z–A)"]]),M=e=>{const{t:t}=(0,A.$G)(),a=(0,n.useMemo)((()=>{if(!e.latestPost)return"";const a=(0,E.BS)(e.latestPost,{myPost:!1})||t("client:notifications.empty-post-summary","[no text]");return a.length>60?a.slice(0,60):a}),[e.latestPost,t]);return n.createElement("button",{type:"button",className:C()({"bg-longan-300 dark:bg-cherry-700":e.selected},"flex w-full flex-row items-center gap-1 py-3 pl-3 pr-1 text-left"),onClick:e.onClick},n.createElement(F.t,{className:"cohost-shadow-light dark:cohost-shadow-dark mx-[0.75rem] block h-[3.75rem] w-[3.75rem]",project:e.project,noLink:!0}),n.createElement("div",{className:"items-left flex flex-1 flex-col overflow-hidden whitespace-nowrap text-notBlack dark:text-notWhite"},n.createElement("div",{className:"overflow-hidden overflow-ellipsis font-bold"},e.project.displayName),n.createElement("div",{className:"overflow-hidden overflow-ellipsis"},"@",e.project.handle),e.latestPost?n.createElement("div",{className:"overflow-hidden overflow-ellipsis"},e.latestPost.publishedAt?n.createElement("span",{className:"font-bold text-cherry-600 dark:text-mango-400"},n.createElement(k.Y,{dateISO:e.latestPost.publishedAt,className:"font-bold text-cherry-600 dark:text-mango-400"}),": "):null,a):null),e.pinned?n.createElement(g.G,{className:"h-6 w-6 self-start"}):null)};var D=e=>{const{t:t}=(0,A.$G)(),[a,l]=(0,n.useState)(null),[r,o]=(0,n.useState)("recently-posted"),[s,c]=(0,n.useState)(e.initialTimestamp),i=d.S.projects.followedFeed.query.useInfiniteQuery({sortOrder:r,limit:20,beforeTimestamp:s},{suspense:!0,staleTime:1/0,keepPreviousData:!0,getNextPageParam:e=>e.nextCursor??void 0}),u=d.S.projects.followedFeed.hasUpdated.useQuery({timestamp:s},{enabled:"recently-posted"===r}),p=i.data?I().concat(...i.data.pages.map((e=>e.projects))):[],f=t("client:following.empty","You're not currently following any pages."),h="bg-longan-300 dark:bg-cherry-700 group-hover:bg-longan-400 ui-open:bg-longan-500 dark:group-hover:bg-cherry-600 dark:ui-open:bg-cherry-600 text-notBlack dark:text-notWhite";return n.createElement("div",{className:"relative flex w-full flex-grow flex-col overflow-y-auto bg-notWhite [flex-basis:20%] [scrollbar-gutter:stable] dark:bg-notBlack"},n.createElement("div",{className:"flex flex-row items-center p-4"},"recently-posted"===r?n.createElement(m.k,{buttonSize:"regular",buttonColor:"theme-sensitive-1",disabled:i.isFetching,onClick:()=>{c(Date.now())},extraClasses:"relative"},"refresh",u.data?n.createElement(T,{className:"absolute -right-1 -top-1 h-4 w-4 text-cherry dark:text-mango"}):null):null,n.createElement("div",{className:"flex-1"}," "),n.createElement(j.R,{value:r,onChange:e=>o(e)},n.createElement(j.R.Button,{className:"group flex flex-row items-center gap-1 self-end"},n.createElement("div",{className:C()("flex h-10 flex-row items-center gap-3 rounded-l-lg px-2",h)},L.get(r)),n.createElement("div",{className:C()("block rounded-r-lg p-2",h)},n.createElement(P.Z,{className:"h-6 w-6 transition-transform ui-open:rotate-180"}))),n.createElement(j.R.Options,{className:"cohost-shadow-light dark:cohost-shadow-dark absolute right-4 top-16 w-fit rounded-lg bg-notWhite text-notBlack"},Array.from(L,(([e,t])=>n.createElement(j.R.Option,{className:"rounded-lg px-2 py-1 hover:bg-longan-300",key:e,value:e},n.createElement("button",null,t))))))),i.isSuccess&&0===p.length?n.createElement("div",{className:"text-center"},f):n.createElement("ul",null,p.map((t=>n.createElement("li",{key:t.project.projectId},n.createElement(M,{project:t.project,pinned:t.projectPinned,selected:t.project.projectId===a,latestPost:t.latestPost,onClick:()=>{l(t.project.projectId),e.activateProject({project:t.project,pinned:t.projectPinned})}})))),i.hasNextPage&&!i.isFetching?n.createElement("li",{className:"flex flex-row justify-center"},n.createElement("button",{className:"flex flex-row gap-3 p-3 font-bold text-notBlack dark:text-notWhite",type:"button",onClick:()=>i.fetchNextPage()},n.createElement(y.Z,{className:"h-6 w-6"}),"load more")):null))},Z=a(20616),z=e=>{const t=(0,o.dg)(),a=(0,i.m)();(0,n.useEffect)((()=>{t&&a.setup({project:t})}),[a,t]);const[d,u]=(0,n.useState)(void 0),p=("lg",(0,s.Z)(`(min-width: ${c.lg})`,!1));return n.createElement(n.Fragment,null,n.createElement(r.ql,{title:"following"}),n.createElement("div",{className:"styled-scrollbars-light dark:styled-scrollbars-dark container mx-auto flex w-full flex-row [height:calc(100vh-4rem)]"},n.createElement(Z.w3,{narrowMode:!0}),n.createElement(D,{activateProject:e=>{e&&!p?document.location=l.ZP.public.project.mainAppProfile({projectHandle:e.project.handle}).toString():u(e)},initialTimestamp:e.initialTimestamp}),p?n.createElement(x,{activeProject:d}):null))}},46196:function(e,t,a){a.d(t,{A:function(){return i},Z:function(){return d}});var l=a(94159),n=l.forwardRef((function({title:e,titleId:t,...a},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))})),r=a(65443),o=a.n(r),s=a(88658);const c=o()("h-8","pr-3","fill-secondary","text-notWhite","cohost-shadow-light","dark:cohost-shadow-dark","dark:text-notBlack"),i=({backLink:e,forwardLink:t,condensed:a=!1,backOnClick:r,forwardOnClick:o})=>l.createElement("div",{className:"mb-12 flex flex-row gap-x-6"},a?null:l.createElement("span",{className:"hidden w-16 lg:block"}," "),e?l.createElement("a",{href:e,onClick:r},l.createElement(s.OZ,{className:`${c} scale-x-[-1]`},l.createElement(n,null))):null,l.createElement("span",{className:"flex-grow"}," "),t?l.createElement("a",{href:t,onClick:o},l.createElement(s.OZ,{className:c},l.createElement(n,null))):null);var d=i},35409:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(71860),n=a(62745),r=a(92831),o=a(94159),s=a(33448),c=a(46479),i=a(46196);const d=({handle:e,pinnedPostsAtTop:t,hideReplies:a,hideShares:d,hideAsks:u,viewingOnProjectPage:p=!1,keepPreviousData:m=!0,startingPageNumber:f=0})=>{const h=(0,n.Q)(),[g,v]=(0,o.useTransition)(),[b,w]=(0,r.v)("page",f.toString()),x=parseInt(b??"0")||0,E=l.S.posts.profilePosts.useQuery({projectHandle:e,page:x,options:{pinnedPostsAtTop:t,hideReplies:a,hideShares:d,hideAsks:u,viewingOnProjectPage:p}},{suspense:!0,keepPreviousData:m}),k=(0,o.useMemo)((()=>null!==E.data?.pagination.nextPage&&void 0!==E.data?.pagination.nextPage),[E.data?.pagination.nextPage]),j=(0,o.useMemo)((()=>null!==E.data?.pagination.previousPage&&void 0!==E.data?.pagination.previousPage),[E.data?.pagination.previousPage]),y=(0,o.useCallback)((()=>{const e=E.data?.pagination.previousPage;null!=e&&v((()=>{w(e.toString())}))}),[E.data?.pagination.previousPage,w]),P=(0,o.useCallback)((()=>{const e=E.data?.pagination.nextPage;null!=e&&v((()=>{w(e.toString())}))}),[E.data?.pagination.nextPage,w]),S=(0,o.useMemo)((()=>{if(j)return()=>y()}),[j,y]),C=(0,o.useMemo)((()=>{if(j)return"#"}),[j]),N=(0,o.useMemo)((()=>{if(k)return()=>P()}),[k,P]),I=(0,o.useMemo)((()=>{if(k)return"#"}),[k]);return(0,o.useEffect)((()=>{w(f.toString())}),[e]),o.createElement("div",{className:"mt-4 flex w-fit flex-col gap-4"},E.data?.posts.map(((e,t)=>o.createElement(s.Z,{key:e.postId,initialVisible:t<4,stayRendered:!0},o.createElement(c.G,{viewModel:e,highlightedTags:[],condensed:!0,skipCollapse:!1,displayPrefs:h,commentThreads:void 0})))),o.createElement("div",{className:"max-w-prose"},o.createElement(i.Z,{condensed:!0,backOnClick:S,backLink:C,forwardLink:I,forwardOnClick:N})))}},92831:function(e,t,a){a.d(t,{v:function(){return n}});var l=a(60824);const n=(e,t)=>{const[a,n]=(0,l.lr)();return[a.get(e)??t,t=>{n((a=>(a.set(e,t),a)))}]}},86058:function(e,t,a){a.d(t,{r:function(){return P}});var l=a(94159),n=a(56018),r=a(17881),o=a(92302),s=a(29890),c=a(79211),i=a(76023),d=a(62450);let u=(0,l.createContext)(null);function p(){let e=(0,l.useContext)(u);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,p),e}return e}function m(){let[e,t]=(0,l.useState)([]);return[e.length>0?e.join(" "):void 0,(0,l.useMemo)((()=>function(e){let a=(0,d.z)((e=>(t((t=>[...t,e])),()=>t((t=>{let a=t.slice(),l=a.indexOf(e);return-1!==l&&a.splice(l,1),a}))))),n=(0,l.useMemo)((()=>({register:a,slot:e.slot,name:e.name,props:e.props})),[a,e.slot,e.name,e.props]);return l.createElement(u.Provider,{value:n},e.children)}),[t])]}let f=(0,n.yV)((function(e,t){let a=(0,r.M)(),{id:l=`headlessui-label-${a}`,passive:o=!1,...s}=e,d=p(),u=(0,i.T)(t);(0,c.e)((()=>d.register(l)),[l,d.register]);let m={ref:u,...d.props,id:l};return o&&("onClick"in m&&(delete m.htmlFor,delete m.onClick),"onClick"in s&&delete s.onClick),(0,n.sY)({ourProps:m,theirProps:s,slot:d.slot||{},defaultTag:"label",name:d.name||"Label"})})),h=Object.assign(f,{});var g=a(48878),v=a(12929),b=a(56910),w=a(98009),x=a(55871),E=a(41452);let k=(0,l.createContext)(null);k.displayName="GroupContext";let j=l.Fragment,y=(0,n.yV)((function(e,t){let a=(0,r.M)(),{id:c=`headlessui-switch-${a}`,checked:u,defaultChecked:p=!1,onChange:m,name:f,value:h,form:g,...j}=e,y=(0,l.useContext)(k),P=(0,l.useRef)(null),S=(0,i.T)(P,t,null===y?null:y.setSwitch),[C,N]=(0,x.q)(u,m,p),I=(0,d.z)((()=>null==N?void 0:N(!C))),A=(0,d.z)((e=>{if((0,s.P)(e.currentTarget))return e.preventDefault();e.preventDefault(),I()})),O=(0,d.z)((e=>{e.key===o.R.Space?(e.preventDefault(),I()):e.key===o.R.Enter&&(0,w.g)(e.currentTarget)})),T=(0,d.z)((e=>e.preventDefault())),F=(0,l.useMemo)((()=>({checked:C})),[C]),L={id:c,ref:S,role:"switch",type:(0,v.f)(e,P),tabIndex:0,"aria-checked":C,"aria-labelledby":null==y?void 0:y.labelledby,"aria-describedby":null==y?void 0:y.describedby,onClick:A,onKeyUp:O,onKeyPress:T},M=(0,E.G)();return(0,l.useEffect)((()=>{var e;let t=null==(e=P.current)?void 0:e.closest("form");t&&void 0!==p&&M.addEventListener(t,"reset",(()=>{N(p)}))}),[P,N]),l.createElement(l.Fragment,null,null!=f&&C&&l.createElement(b._,{features:b.A.Hidden,...(0,n.oA)({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:g,checked:C,name:f,value:h})}),(0,n.sY)({ourProps:L,theirProps:j,slot:F,defaultTag:"button",name:"Switch"}))})),P=Object.assign(y,{Group:function(e){var t;let[a,r]=(0,l.useState)(null),[o,s]=m(),[c,i]=(0,g.f)(),d=(0,l.useMemo)((()=>({switch:a,setSwitch:r,labelledby:o,describedby:c})),[a,r,o,c]),u=e;return l.createElement(i,{name:"Switch.Description"},l.createElement(s,{name:"Switch.Label",props:{htmlFor:null==(t=d.switch)?void 0:t.id,onClick(e){a&&("LABEL"===e.currentTarget.tagName&&e.preventDefault(),a.click(),a.focus({preventScroll:!0}))}}},l.createElement(k.Provider,{value:d},(0,n.sY)({ourProps:{},theirProps:u,defaultTag:j,name:"Switch.Group"}))))},Label:h,Description:g.d})}}]);
//# sourceMappingURL=client-preact-components-pages-cohost-reader.5fe92e068a966cacd37e.js.map