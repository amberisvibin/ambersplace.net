"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[847],{21161:function(e,t,n){var a=n(94159);t.Z=function(e){var t=e.children,n=e.fallback,r=void 0===n?null:n,l=a.useState(!1),o=l[0],s=l[1];return a.useEffect((function(){return s(!0)}),[]),o?t:r}},72228:function(e,t,n){n.d(t,{F:function(){return u}});var a=n(97244),r=n(34377),l=n(65443),o=n.n(l),s=n(94159),c=n(99838);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}const u=({style:e="light",showValidity:t=!0,name:n,control:l,rules:u,trigger:d,...m})=>{const{field:f,fieldState:g}=(0,c.bc)({name:n,control:l,rules:u}),{name:y,onChange:p}=f,[h,b]=(0,s.useState)();(0,s.useEffect)((()=>{f.ref(h)}),[h,f]);const{inputStyleClasses:v,contentDivStyleClasses:E,validityIconStyleClasses:S}=(0,s.useMemo)((()=>{switch(e){case"light":return{inputStyleClasses:"border-gray-600 text-notBlack\n                        placeholder:text-gray-600\n                        focus:border-notBlack disabled:border-gray-300",contentDivStyleClasses:"to-notWhite",validityIconStyleClasses:"bg-notWhite"};case"dynamic":return{inputStyleClasses:"co-styled-input",contentDivStyleClasses:"co-styled-input-content",validityIconStyleClasses:"co-styled-input-validity-icon"};default:return{inputStyleClasses:"border-gray-400 text-notWhite \n                        placeholder:text-gray-400\n                        focus:border-notWhite read-only:bg-gray-700",contentDivStyleClasses:"to-notBlack",validityIconStyleClasses:"bg-notBlack"}}}),[e]);return(0,s.useEffect)((()=>{h&&h.value&&h.value!==m.defaultValue&&h.value!==f.value&&!g.isTouched&&(p(h.value),d(y,{shouldFocus:!0}))}),[h,f.value,y,g.isTouched,p,m.defaultValue,d]),s.createElement("div",{className:"relative"},s.createElement("input",i({className:o()("\n                        w-full min-w-[15rem] rounded-lg border-2 bg-transparent\n                    ",v)},m,f,{ref:b})),t&&!m.readOnly&&g.isTouched?s.createElement(s.Fragment,null,s.createElement("div",{className:o()("\n                                absolute bottom-0 right-9 top-0 my-auto h-6 w-3 \n                                bg-gradient-to-r from-transparent\n                            ",E)}),g.invalid?s.createElement(a.Z,{className:o()("\n                                    absolute bottom-0 right-3 top-0 my-auto h-6 \n                                    w-6 text-red\n                                ",S)}):s.createElement(r.Z,{className:o()("\n                                    absolute bottom-0 right-3 top-0 my-auto h-6\n                                    w-6 bg-notWhite text-green\n                                ",S)})):null)}},76736:function(e,t,n){n.r(t),n.d(t,{TwoFactorTokenPage:function(){return p}});var a=n(12093),r=n(87836),l=n(90275),o=n(70069),s=n(21161),c=n(94159),i=n(99838),u=n(51028),d=n(6553),m=n(28922),f=n(71860),g=n(36592);const y=({redirectTo:e="/"})=>{const{t:t}=(0,u.$G)(),[n,a]=(0,c.useState)(!1),[r,l]=(0,c.useState)(""),{handleSubmit:o,control:y,formState:{errors:p},trigger:h}=(0,i.cI)({mode:"onTouched"}),[b,v]=(0,c.useState)(void 0),E=f.S.login.send2FAToken.useMutation();return c.createElement(s.Z,{fallback:c.createElement("div",{className:"prose prose-invert text-notWhite"},c.createElement("p",null,"Loading..."),c.createElement("p",null,"If you keep seeing this, try refreshing!"))},c.createElement("form",{className:"flex flex-col gap-4",id:"login-form",onSubmit:o((async({token:t})=>{a(!0),l("");try{await E.mutateAsync({token:t}),location.replace(e)}catch(e){e instanceof g.ss||l("error");const t=e;switch(t.data?.errorCode){case"incorrect-totp":if(void 0!==t.data?.retriesRemaining){v(t.data.retriesRemaining);break}location.reload();break;default:l(t.message)}}finally{a(!1)}}))},c.createElement("h1",{className:"text-xl capitalize"},t("common:login")),r?c.createElement("div",{className:"max-w-prose rounded-lg border-red-500 bg-red-300 p-3 text-notBlack"},r):null,c.createElement("div",{className:"flex flex-col gap-2"},c.createElement("label",{htmlFor:"token",className:"text-lg"},t("client:login.2fa-token",{defaultValue:"your 2fa code:"})),c.createElement(m.y,{trigger:h,type:"text",autoComplete:"one-time-code",name:"token",rules:{required:t("client:login.token.required","2FA code can't be empty!").toString(),minLength:6},control:y}),b?c.createElement("div",{className:"text-sm text-notWhite",role:"alert"},"incorrect code. retries left: ",b,"."):null),c.createElement(d.p,{type:"submit",disabled:n},t("common:login"))))},p=({redirectTo:e})=>{const{t:t}=(0,u.$G)();return c.createElement(c.Fragment,null,c.createElement(l.ql,{title:"login"}),c.createElement(o.L,{className:"-ml-6 text-notWhite lg:-ml-12"}),c.createElement(y,{redirectTo:e}),c.createElement("a",{href:a.ZP.public.welcome().toString(),className:"flex items-center gap-1 capitalize text-mango hover:underline"},c.createElement(r.Z,{className:"h-6 w-6"}),t("common:back-button")))};p.displayName="2fa-token",t.default=p},28922:function(e,t,n){n.d(t,{y:function(){return o}});var a=n(94159),r=n(72228);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}const o=({...e})=>a.createElement(r.F,l({style:"dark"},e))},87836:function(e,t,n){var a=n(94159);const r=a.forwardRef((function({title:e,titleId:t,...n},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}));t.Z=r}}]);
//# sourceMappingURL=client-preact-components-pages-2fa-token.819f8711ef91b654d30e.js.map