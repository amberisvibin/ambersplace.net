"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2560],{2735:function(e,t,r){r.d(t,{Qj:function(){return S},zx:function(){return N}});var o=r(65443),n=r.n(o),a=r(94159),c=r(6285);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s.apply(this,arguments)}const l=c.z.enum(["pill","roundrect","authn"]),d=c.z.enum(["cherry","strawberry","mango","not-black","red","green","accent","secondary","authn-primary","authn-other"]),i=(c.z.object({buttonStyle:l,color:d,className:c.z.string().optional()}),n()("bg-notWhite","hover:text-notWhite")),u=n()("font-atkinson","font-bold","rounded-full","border-2"),b=n()("body-2","rounded-lg"),g=n()("flex","h-12","items-center","justify-center","rounded-lg","px-6","text-lg"),m=n()("border-cherry","hover:bg-cherry","text-cherry","active:bg-cherry-600","active:border-cherry-600","disabled:text-cherry-300","disabled:border-cherry-300","focus:outline-cherry","focus:ring-cherry",i),y=n()("border-strawberry","hover:bg-strawberry","text-strawberry","active:bg-strawberry-600","active:border-strawberry-600","disabled:text-strawberry-300","disabled:border-strawberry-300","focus:outline-strawberry","focus:ring-strawberry",i),f=n()("border-red","hover:bg-red","text-red","active:bg-red-600","active:border-red-600","disabled:text-red-300","disabled:border-red-300","focus:outline-red",i),h=n()("border-green","hover:bg-green","text-green","active:bg-green-600","active:border-green-600","disabled:text-green-300","disabled:border-green-300","focus:outline-green",i),x=n()("border-mango","hover:bg-mango","text-mango","bg-notBlack","hover:text-notBlack"),k=n()("border-notBlack","hover:bg-notBlack","text-notBlack","focus:outline-notBlack","focus:ring-notBlack",i),p=n()("border-accent","text-accent","bg-foreground","hover:bg-accent","hover:text-text"),v=n()("bg-secondary","text-notWhite","dark:text-notBlack","hover:bg-secondary-600"),E=n()("bg-foreground","text-text","hover:bg-foreground-600","active:bg-foreground-700","disabled:bg-foreground-200"),w=n()("border-2","border-foreground","text-foreground","hover:bg-longan-200"),j=e=>n()("leading-none","align-middle","py-2","px-4","no-select",e.className,{[u]:"pill"===e.buttonStyle,[b]:"roundrect"===e.buttonStyle,[g]:"authn"===e.buttonStyle,[m]:"cherry"===e.color,[y]:"strawberry"===e.color,[x]:"mango"===e.color,[k]:"not-black"===e.color,[f]:"red"===e.color,[p]:"accent"===e.color,[h]:"green"===e.color,[v]:"secondary"===e.color,[E]:"authn-primary"===e.color,[w]:"authn-other"===e.color}),N=a.forwardRef((({buttonStyle:e,color:t,className:r,...o},n)=>{const c=j({buttonStyle:e,color:t,className:r,...o});return a.createElement("button",s({},o,{className:c,ref:n}),o.children)}));N.displayName="Button";const S=a.forwardRef((({buttonStyle:e,color:t,...r},o)=>{const n=j({buttonStyle:e,color:t,...r});return a.createElement("a",s({},r,{className:n,ref:o}),r.children)}));S.displayName="LinkButton"},71217:function(e,t,r){r.r(t),r.d(t,{InboxPage:function(){return h}});var o=r(71860),n=r(36592),a=r(94159),c=r(59134),s=r(38934),l=r(8227),d=r(81732),i=r(67177),u=r(20616),b=r(51028),g=r(2735),m=r(62745),y=r(12093),f=r(91045);const h=()=>{const{loggedIn:e}=(0,l.Pc)(),t=o.S.useContext(),r=o.S.asks.listPending.useInfiniteQuery({},{staleTime:3e5,suspense:!0,enabled:e,onSettled:async()=>{await t.asks.unreadCount.invalidate()},getNextPageParam:e=>e.nextCursor}),n=r.data?.pages??[],c=(0,s.dg)(),i=(0,d.m)();return(0,a.useEffect)((()=>{c&&i.setup({project:c})}),[c,i]),a.createElement("main",{className:"w-full pb-16 pt-16"},a.createElement("div",{className:"container mx-auto grid grid-cols-1 gap-16 lg:grid-cols-4"},a.createElement(u.w3,null),a.createElement("section",{className:"col-span-1 flex flex-col gap-12 lg:col-span-2"},a.createElement("div",{className:"flex flex-col gap-8 p-3"},a.createElement("h1",{className:"text-4xl font-bold text-bgText"},"inbox"),n.map((e=>a.createElement(a.Fragment,null,e.asks.map((e=>a.createElement(k,{key:e.askId,ask:e})))))),r.hasNextPage&&a.createElement(g.zx,{buttonStyle:"authn",color:"authn-primary",onClick:async()=>{await r.fetchNextPage()}},"load more")))))},x=({ask:e,isOpen:t,onClose:r})=>{const{t:s}=(0,b.$G)(),l=o.S.useContext(),d=o.S.asks.reject.useMutation({onSettled:async()=>{await l.asks.listPending.invalidate()}}),i=(0,a.useCallback)((()=>{r(),c.ZP.promise(d.mutateAsync(e.askId),{loading:"Rejecting ask...",success:"Ask rejected!",error:e=>(console.error(e),e instanceof n.ss?e.message:"Failed to reject ask")}).catch((e=>null))}),[e.askId,r,d]);return a.createElement(f.w,{isOpen:t,title:s("client:reject-ask.confirm-title","Reject this ask"),body:s("client:reject-ask.confirm-message","Are you sure you want to reject this ask? This cannot be undone."),confirm:{label:s("common:reject","reject"),color:"destructive"},cancel:{label:s("common:cancel")},onConfirm:i,onCancel:r})},k=({ask:e})=>{const t=(0,d.m)(),r=o.S.useContext(),n=(0,a.useCallback)((()=>{r.asks.listPending.invalidate()}),[r.asks.listPending]),[c,l]=(0,a.useState)(!1),{disableModalPostComposer:u}=(0,m.Q)(),b=(0,a.useCallback)((r=>{u||r.ctrlKey||r.metaKey||3===r.button||(r.preventDefault(),t.activate({responseToAskId:e.askId,onPost:n}))}),[e.askId,u,t,n]),g=(0,s.dg)();return a.createElement("div",null,a.createElement(x,{ask:e,isOpen:c,onClose:()=>l(!1)}),a.createElement(i.H,{ask:e},a.createElement("button",{onClick:()=>l(!0),className:"cursor-pointer text-sm text-gray-400 hover:underline"},"reject"),a.createElement("a",{onClick:b,href:y.ZP.public.project.composePost({projectHandle:g?.handle??"",responseToAskId:e.askId}).toString(),className:"cursor-pointer text-sm text-gray-400 hover:underline"},"respond")))};t.default=h}}]);
//# sourceMappingURL=client-preact-components-pages-inbox.e310c1bd054d44399d42.js.map