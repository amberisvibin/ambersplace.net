"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7851],{2735:function(e,t,n){n.d(t,{Qj:function(){return T},zx:function(){return C}});var r=n(65443),a=n.n(r),l=n(94159),o=n(6285);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}const d=o.z.enum(["pill","roundrect","authn"]),m=o.z.enum(["cherry","strawberry","mango","not-black","red","green","accent","secondary","authn-primary","authn-other"]),u=(o.z.object({buttonStyle:d,color:m,className:o.z.string().optional()}),a()("bg-notWhite","hover:text-notWhite")),s=a()("font-atkinson","font-bold","rounded-full","border-2"),g=a()("body-2","rounded-lg"),i=a()("flex","h-12","items-center","justify-center","rounded-lg","px-6","text-lg"),y=a()("border-cherry","hover:bg-cherry","text-cherry","active:bg-cherry-600","active:border-cherry-600","disabled:text-cherry-300","disabled:border-cherry-300","focus:outline-cherry","focus:ring-cherry",u),b=a()("border-strawberry","hover:bg-strawberry","text-strawberry","active:bg-strawberry-600","active:border-strawberry-600","disabled:text-strawberry-300","disabled:border-strawberry-300","focus:outline-strawberry","focus:ring-strawberry",u),h=a()("border-red","hover:bg-red","text-red","active:bg-red-600","active:border-red-600","disabled:text-red-300","disabled:border-red-300","focus:outline-red",u),E=a()("border-green","hover:bg-green","text-green","active:bg-green-600","active:border-green-600","disabled:text-green-300","disabled:border-green-300","focus:outline-green",u),p=a()("border-mango","hover:bg-mango","text-mango","bg-notBlack","hover:text-notBlack"),f=a()("border-notBlack","hover:bg-notBlack","text-notBlack","focus:outline-notBlack","focus:ring-notBlack",u),I=a()("border-accent","text-accent","bg-foreground","hover:bg-accent","hover:text-text"),S=a()("bg-secondary","text-notWhite","dark:text-notBlack","hover:bg-secondary-600"),x=a()("bg-foreground","text-text","hover:bg-foreground-600","active:bg-foreground-700","disabled:bg-foreground-200"),k=a()("border-2","border-foreground","text-foreground","hover:bg-longan-200"),v=e=>a()("leading-none","align-middle","py-2","px-4","no-select",e.className,{[s]:"pill"===e.buttonStyle,[g]:"roundrect"===e.buttonStyle,[i]:"authn"===e.buttonStyle,[y]:"cherry"===e.color,[b]:"strawberry"===e.color,[p]:"mango"===e.color,[f]:"not-black"===e.color,[h]:"red"===e.color,[I]:"accent"===e.color,[E]:"green"===e.color,[S]:"secondary"===e.color,[x]:"authn-primary"===e.color,[k]:"authn-other"===e.color}),C=l.forwardRef((({buttonStyle:e,color:t,className:n,...r},a)=>{const o=v({buttonStyle:e,color:t,className:n,...r});return l.createElement("button",c({},r,{className:o,ref:a}),r.children)}));C.displayName="Button";const T=l.forwardRef((({buttonStyle:e,color:t,...n},r)=>{const a=v({buttonStyle:e,color:t,...n});return l.createElement("a",c({},n,{className:a,ref:r}),n.children)}));T.displayName="LinkButton"},24348:function(e,t,n){n.r(t),n.d(t,{TagOntologyManageTagsPage:function(){return k}});var r=n(71860),a=n(61888),l=n.n(a),o=n(94159),c=n(99838),d=n(46975),m=n(2735),u=n(83797),s=n(73969),g=n(60824),i=n(12093);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const b=({onTagSelected:e})=>{const[t,n]=(0,g.lr)(),[a,l]=(0,o.useState)((()=>t.get("content")??"")),{data:u}=r.S.moderation.tag.search.useQuery({query:a},{suspense:!0,enabled:!!a}),[,s]=(0,o.useTransition)(),{register:b,handleSubmit:h}=(0,c.cI)({defaultValues:{content:a}});return o.createElement(o.Fragment,null,o.createElement("form",{onSubmit:h((e=>{s((()=>{l(e.content),n((t=>(t.set("content",e.content),t)),{replace:!0})}))}))},"search for tags by content:",o.createElement("input",y({type:"text"},b("content"))),o.createElement(d.k,{type:"submit",buttonSize:"regular",buttonColor:"cherry"},"submit")),u?o.createElement("table",{className:"prose"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("td",null,o.createElement("strong",null,"tag ID")),o.createElement("td",null,o.createElement("strong",null,"tag content")),o.createElement("td",null,o.createElement("strong",null,"primary synonym")))),o.createElement("tbody",null,u.map((t=>o.createElement("tr",{key:t.tagId},o.createElement("td",null,o.createElement(m.zx,{onClick:()=>e(t.tagId),buttonStyle:"pill",color:"cherry"},t.tagId)),o.createElement("td",null,o.createElement("a",{href:i.ZP.public.tags({tagSlug:t.content}).toString(),target:"_blank",rel:"noopener"},"#",t.content)),o.createElement("td",null,o.createElement("a",{href:i.ZP.public.tags({tagSlug:t.primarySynonymContent}).toString(),target:"_blank",rel:"noopener"},"#",t.primarySynonymContent))))))):null)},h=({tagId:e,onTagSelected:t})=>{const{data:n}=r.S.moderation.tag.getById.useQuery({tagId:e},{suspense:!0,enabled:!!e}),a=r.S.moderation.tag.resetPrimarySynonym.useMutation(),c=n?l()(n.relatedTags).filter((e=>e.tagId!==n.tagId)).groupBy((e=>e.relationship)).value():{},d=c.synonym??[],u=c.related??[];return n?o.createElement(o.Fragment,null,o.createElement("h2",{className:"text-3xl"},"manage tag ID ",n.tagId," (#",n.content,")"),o.createElement("table",null,o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",null,"tag ID"),o.createElement("td",null,n.tagId)),o.createElement("tr",null,o.createElement("td",null,"tag content"),o.createElement("td",null,o.createElement("a",{href:i.ZP.public.tags({tagSlug:n.content}).toString(),target:"_blank",rel:"noopener"},n.content))),o.createElement("tr",null,o.createElement("td",null,"primary synonym"),o.createElement("td",null,n.primarySynonym?o.createElement(m.zx,{onClick:()=>t(n.primarySynonym.tagId),buttonStyle:"pill",color:"cherry"},n.primarySynonym.tagId," (#",n.primarySynonym.content,")"):"—"," ",n.primarySynonym?.tagId!==n.tagId?o.createElement(m.zx,{onClick:()=>{a.mutate({tagId:e}),location.reload()},buttonStyle:"pill",color:"red"},"reset"):null)),o.createElement("tr",null,o.createElement("td",null,"other synonyms"),o.createElement("td",null,o.createElement("ul",null,d.length>0?d.map((e=>o.createElement("li",{key:e.tagId},o.createElement(m.zx,{onClick:()=>t(e.tagId),buttonStyle:"pill",color:"cherry"},e.tagId," (#",e.content,")")))):"—"))),o.createElement("tr",null,o.createElement("td",null,"related tags"),o.createElement("td",null,o.createElement("ul",null,u.length>0?u.map((e=>o.createElement("li",{key:e.tagId},o.createElement(m.zx,{onClick:()=>t(e.tagId),buttonStyle:"pill",color:"cherry"},e.tagId," (#",e.content,")")))):"—"))))),o.createElement("hr",null),o.createElement("h2",null,"modify by content"),o.createElement(E,{tagId:n.tagId,tagContent:n.content}),o.createElement("hr",null),o.createElement(f,{tagId:e,tagContent:n.content}),o.createElement("hr",null),o.createElement(S,{tagId:e,tagContent:n.content}),o.createElement("hr",null),o.createElement("details",null,o.createElement("summary",null,o.createElement("h2",{className:"inline-block"},"modify by ID")),o.createElement(p,{tagId:n.tagId,tagContent:n.content}),o.createElement("hr",null),o.createElement(I,{tagId:e,tagContent:n.content}),o.createElement("hr",null),o.createElement(x,{tagId:e,tagContent:n.content}))):null},E=({tagId:e,tagContent:t})=>{const n=r.S.useContext(),a=r.S.moderation.tag.createSynonym.useMutation({}),{handleSubmit:l,control:m}=(0,c.cI)({defaultValues:{primaryTag:[]}});return o.createElement("form",{onSubmit:l((async t=>{const r=await n.moderation.tag.getByContent.fetch({content:t.primaryTag[0]});await a.mutateAsync({primarySynonymId:r.tagId,otherTagId:e}),location.reload()}))},o.createElement("h3",{className:"text-xl"},"set new primary tag for #",t),o.createElement("p",null,"uses the first tag"),o.createElement("div",{className:"not-prose flex flex-col rounded-lg border border-gray-500 p-3"},o.createElement(c.Qr,{control:m,name:"primaryTag",render:({field:e})=>o.createElement(u.r,{TokenIcon:s.Z,setTokens:e.onChange,tokens:e.value,getSuggestions:!0,placeholder:"Pick a tag!"})})),o.createElement(d.k,{type:"submit",buttonSize:"regular",buttonColor:"cherry"},"set"))},p=({tagId:e,tagContent:t})=>{const n=r.S.moderation.tag.createSynonym.useMutation({}),{handleSubmit:a,register:l}=(0,c.cI)({defaultValues:{primaryTagId:""}});return o.createElement("form",{onSubmit:a((async t=>{await n.mutateAsync({primarySynonymId:t.primaryTagId,otherTagId:e}),location.reload()}))},o.createElement("h3",{className:"text-xl"},"set new primary tag for #",t),o.createElement("div",{className:"not-prose flex flex-col rounded-lg border border-gray-500 p-3"},o.createElement("label",null,"primary tag ID",o.createElement("input",y({type:"number"},l("primaryTagId"))))),o.createElement(d.k,{type:"submit",buttonSize:"regular",buttonColor:"cherry"},"set"))},f=({tagId:e,tagContent:t})=>{const n=r.S.moderation.tag.createSynonym.useMutation({}),a=r.S.useContext(),{handleSubmit:l,control:m}=(0,c.cI)({defaultValues:{synonyms:[]}});return o.createElement("form",{onSubmit:l((async t=>{await Promise.all(t.synonyms.map((t=>a.moderation.tag.getByContent.fetch({content:t}).then((t=>n.mutateAsync({primarySynonymId:e,otherTagId:t.tagId})))))),location.reload()}))},o.createElement("h3",{className:"text-xl"},"add child synonyms for #",t),o.createElement("div",{className:"not-prose flex flex-col rounded-lg border border-gray-500 p-3"},o.createElement(c.Qr,{control:m,name:"synonyms",render:({field:e})=>o.createElement(u.r,{TokenIcon:s.Z,setTokens:e.onChange,tokens:e.value,getSuggestions:!0,placeholder:"Pick a tag!"})})),o.createElement(d.k,{type:"submit",buttonSize:"regular",buttonColor:"cherry"},"add"))},I=({tagId:e,tagContent:t})=>{const n=r.S.moderation.tag.createSynonym.useMutation({}),{handleSubmit:a,register:l}=(0,c.cI)({defaultValues:{synonymTagId:""}});return o.createElement("form",{onSubmit:a((async t=>{await n.mutateAsync({primarySynonymId:e,otherTagId:t.synonymTagId}),location.reload()}))},o.createElement("h3",{className:"text-xl"},"add child synonym for #",t),o.createElement("div",{className:"not-prose flex flex-col rounded-lg border border-gray-500 p-3"},o.createElement("label",null,"child synonym tag ID",o.createElement("input",y({type:"number"},l("synonymTagId"))))),o.createElement(d.k,{type:"submit",buttonSize:"regular",buttonColor:"cherry"},"add"))},S=({tagId:e,tagContent:t})=>{const n=r.S.moderation.tag.createRelation.useMutation({}),a=r.S.useContext(),{handleSubmit:l,control:m}=(0,c.cI)({defaultValues:{relatedTags:[]}});return o.createElement("form",{onSubmit:l((async t=>{await Promise.all(t.relatedTags.map((t=>a.moderation.tag.getByContent.fetch({content:t}).then((t=>n.mutateAsync({tagIdA:e,tagIdB:t.tagId})))))),location.reload()}))},o.createElement("h3",{className:"text-xl"},"add a related tag to #",t),o.createElement("div",{className:"not-prose flex flex-col rounded-lg border border-gray-500 p-3"},o.createElement(c.Qr,{control:m,name:"relatedTags",render:({field:e})=>o.createElement(u.r,{TokenIcon:s.Z,setTokens:e.onChange,tokens:e.value,getSuggestions:!0,placeholder:"Pick a tag!"})})),o.createElement(d.k,{type:"submit",buttonSize:"regular",buttonColor:"cherry"},"add"))},x=({tagId:e,tagContent:t})=>{const n=r.S.moderation.tag.createRelation.useMutation({}),{handleSubmit:a,register:l}=(0,c.cI)({defaultValues:{relatedTagId:""}});return o.createElement("form",{onSubmit:a((async t=>{await n.mutateAsync({tagIdA:e,tagIdB:t.relatedTagId}),location.reload()}))},o.createElement("h3",{className:"text-xl"},"add a related tag to #",t),o.createElement("div",{className:"not-prose flex flex-col rounded-lg border border-gray-500 p-3"},o.createElement("label",null,"related tag ID",o.createElement("input",y({type:"number"},l("relatedTagId"))))),o.createElement(d.k,{type:"submit",buttonSize:"regular",buttonColor:"cherry"},"add"))},k=()=>{const[e,t]=(0,g.lr)(),[n,r]=(0,o.useState)((()=>e.get("tagId")??"")),[,a]=(0,o.useTransition)(),l=(0,o.useCallback)((e=>{a((()=>{r(e),t((t=>(t.set("tagId",e),t)),{replace:!0})}))}),[t]);return o.createElement("div",{className:"cohost-shadow-light dark:cohost-shadow-dark container mx-auto mt-12 flex flex-col gap-4 rounded-lg bg-notWhite p-3 text-notBlack"},o.createElement("div",{className:"prose"},o.createElement("h1",{className:"text-4xl"},"manage tags"),o.createElement(b,{onTagSelected:l}),o.createElement("hr",null),o.createElement(h,{tagId:n,onTagSelected:l})))};t.default=k}}]);
//# sourceMappingURL=client-preact-components-pages-moderation-tag-ontology-manage-tags.0939addb26db109fc9ac.js.map